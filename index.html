<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Krish Patel ‚Äì Portfolio</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      background-color: #fff;
    }
    .header {
      padding: 20px;
      text-align: center;
      background-color: #f4f4f4;
    }
    .header img {
      width: 150px;
      border-radius: 50%;
      margin-top: 10px;
    }
    .container {
      padding: 20px;
    }
    h3.workshop-title {
      text-align: center;
      margin-top: 40px;
    }
    canvas, .webgl-container {
      display: block;
      margin: 20px auto;
      width: 100%;
      max-width: 900px;
      height: 400px;
    }
    .view-full {
      text-align: center;
      margin-top: 10px;
    }
    .view-full a {
      color: #6b2cff;
      text-decoration: none;
      font-weight: bold;
    }
  </style>

  <!-- importmap for Three.js modules -->
  <script type="importmap">
  {
    "imports": {
      "three":          "https://cdn.jsdelivr.net/npm/three@0.166.0/build/three.module.js",
      "three/addons/":  "https://cdn.jsdelivr.net/npm/three@0.166.0/examples/jsm/"
    }
  }
  </script>
</head>
<body>
  <div class="header">
    <h1>Krish Patel</h1>
    <img src="./images/krishpatel.jpg" alt="Krish Patel" />
    <p>Computer Engineering Student</p>
    <p>Email: <a href="mailto:krishspatel19@gmail.com">krishspatel19@gmail.com</a></p>
    <p>
      <a href="https://www.linkedin.com/in/krishpatel17" target="_blank">LinkedIn</a>
      |
      <a href="https://github.com/krishp1234" target="_blank">GitHub</a>
    </p>
  </div>

  <div class="container">
    <!-- education, experience, projects‚Ä¶ (omitted here for brevity) -->

    <!-- ===== Workshop 3 ===== -->
    <h3 id="stickfigure" class="workshop-title">üßç Workshop 3: Stick Figure</h3>
    <canvas id="stickfigure-canvas"></canvas>
    <div class="view-full">
      <a href="workshop3.html" target="_blank">View Full Workshop 3 ‚Üí</a>
    </div>

    <!-- ===== Workshop 4 ===== -->
    <h3 id="bumpmap" class="workshop-title">üåç Workshop 4: Bump Mapped Earth</h3>
    <div id="earth-container" class="webgl-container"></div>
    <div class="view-full">
      <a href="class04.html" target="_blank">View Full Workshop 4 ‚Üí</a>
    </div>

    <!-- ===== Workshop 5 ===== -->
    <h3 id="models" class="workshop-title">üî∫ Workshop 5: Load Models (OBJ + MTL)</h3>
    <div id="model-container" class="webgl-container"></div>
    <div class="view-full">
      <a href="class05_1.html" target="_blank">View Full Workshop 5 ‚Üí</a>
    </div>

    <!-- ===== Workshop 6.1 ===== -->
    <h3 id="shadowmap" class="workshop-title">üî¶ Workshop 6.1: Shadow Mapping</h3>
    <div id="shadow-container" class="webgl-container"></div>
    <div class="view-full">
      <a href="class06_1.html" target="_blank">View Full Workshop 6.1 ‚Üí</a>
    </div>

    <!-- ===== Workshop 7 ===== -->
    <h3 id="gravity" class="workshop-title">‚òÑ Workshop 7: N-Body Gravity</h3>
    <div id="gravity-container" class="webgl-container"></div>
    <div class="view-full">
      <a href="class07_1.html" target="_blank">View Full Workshop 7 ‚Üí</a>
    </div>

    <!-- certifications, contact‚Ä¶ -->
  </div>

  <!-- ============================= -->
  <!-- Workshop 3 inline preview -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
  <script>
    const canvas3 = document.getElementById("stickfigure-canvas"),
          scene3  = new THREE.Scene(),
          cam3    = new THREE.PerspectiveCamera(75, window.innerWidth/400, 0.1, 1000),
          rend3   = new THREE.WebGLRenderer({canvas: canvas3});
    cam3.position.z = 5;
    rend3.setSize(window.innerWidth,400);
    rend3.setClearColor(0xf4f4f4);
    const mats = [
      new THREE.MeshBasicMaterial({color:0x00ff00}),
      new THREE.MeshBasicMaterial({color:0xff0000}),
      new THREE.MeshBasicMaterial({color:0x0000ff})
    ];
    const [gM,rM,bM] = mats;
    const head = new THREE.Mesh(new THREE.SphereGeometry(0.5,32,32), gM); head.position.y=1.5;
    const body = new THREE.Mesh(new THREE.CylinderGeometry(0.2,0.2,2), rM);
    const la = new THREE.Mesh(new THREE.CylinderGeometry(0.1,0.1,1), bM);
    la.position.set(-0.8,0.5,0); la.rotation.z=Math.PI/4;
    const ra = new THREE.Mesh(new THREE.CylinderGeometry(0.1,0.1,1), bM);
    ra.position.set(0.8,0.5,0); ra.rotation.z=-Math.PI/4;
    const ll = new THREE.Mesh(new THREE.CylinderGeometry(0.1,0.1,1), bM);
    ll.position.set(-0.3,-1.5,0); ll.rotation.z=Math.PI/16;
    const rl = new THREE.Mesh(new THREE.CylinderGeometry(0.1,0.1,1), bM);
    rl.position.set(0.3,-1.5,0); rl.rotation.z=-Math.PI/16;
    const grp3 = new THREE.Group();
    grp3.add(head,body,la,ra,ll,rl);
    scene3.add(grp3);
    (function anim3(){
      requestAnimationFrame(anim3);
      grp3.rotation.x += 0.005;
      grp3.rotation.y += 0.01;
      rend3.render(scene3, cam3);
    })();
  </script>

  <!-- ============================= -->
  <!-- Workshop 4 inline preview -->
  <script type="module">
    import * as THREE        from 'three';
    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
    const c4 = document.getElementById("earth-container"),
          s4 = new THREE.Scene(),
          cam4 = new THREE.PerspectiveCamera(75, c4.clientWidth/c4.clientHeight,0.1,1000);
    cam4.position.z=3;
    const r4 = new THREE.WebGLRenderer({antialias:true});
    r4.setSize(c4.clientWidth,c4.clientHeight);
    r4.setClearColor(0x000);
    c4.appendChild(r4.domElement);
    s4.add(new THREE.DirectionalLight(0xffffff,2).position.set(5,5,5));
    s4.add(new THREE.AmbientLight(0xffffff,0.3));
    const tl = new THREE.TextureLoader();
    const day = tl.load('textures/worldColour.5400x2700.jpg'),
          bpm = tl.load('textures/earth_bumpmap.jpg');
    day.colorSpace = THREE.SRGBColorSpace;
    bpm.colorSpace = THREE.SRGBColorSpace;
    const mat4 = new THREE.MeshStandardMaterial({map:day,bumpMap:bpm,bumpScale:0.05});
    const earth = new THREE.Mesh(new THREE.SphereGeometry(1,64,64), mat4);
    s4.add(earth);
    const ctrl4 = new OrbitControls(cam4, r4.domElement);
    ctrl4.minDistance=1; ctrl4.maxDistance=10;
    window.addEventListener('resize', ()=>{
      const w=c4.clientWidth,h=c4.clientHeight;
      cam4.aspect=w/h; cam4.updateProjectionMatrix();
      r4.setSize(w,h);
    });
    (function anim4(){
      requestAnimationFrame(anim4);
      earth.rotation.y += 0.002;
      ctrl4.update();
      r4.render(s4,cam4);
    })();
  </script>

  <!-- ============================= -->
  <!-- Workshop 5 inline preview -->
  <script type="module">
    import * as THREE        from 'three';
    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
    import { MTLLoader }     from 'three/addons/loaders/MTLLoader.js';
    import { OBJLoader }     from 'three/addons/loaders/OBJLoader.js';
    const c5 = document.getElementById("model-container"),
          s5 = new THREE.Scene(),
          cam5 = new THREE.PerspectiveCamera(45,c5.clientWidth/c5.clientHeight,0.1,20);
    cam5.position.set(0,1.5,4);
    const r5 = new THREE.WebGLRenderer({antialias:true});
    r5.setSize(c5.clientWidth,c5.clientHeight);
    c5.appendChild(r5.domElement);
    s5.add(new THREE.AmbientLight(0x888888,0.5));
    const dl = new THREE.DirectionalLight(0xffffff,1.5);
    dl.position.set(5,10,5);
    s5.add(dl);
    const env = new THREE.CubeTextureLoader().setPath('textures/Bridge2/').load([
      'posx.jpg','negx.jpg','posy.jpg','negy.jpg','posz.jpg','negz.jpg'
    ]);
    s5.environment = s5.background = env;
    const ctrl5 = new OrbitControls(cam5,r5.domElement);
    ctrl5.enableDamping=true;
    function loadModel(mtl,obj){
      new MTLLoader().setPath('models/').load(`${mtl}.mtl`, m=>{
        m.preload();
        new OBJLoader().setMaterials(m).setPath('models/').load(`${obj}.obj`, o=>{
          const bb=new THREE.Box3().setFromObject(o),
                s=1/ bb.getSize(new THREE.Vector3()).length();
          o.scale.set(s,s,s);
          bb.getCenter(o.position).multiplyScalar(-s);
          s5.add(o);
        });
      });
    }
    loadModel('bunny_texture','bunny');
    loadModel('sphere','sphere');
    window.addEventListener('resize',()=>{
      const w=c5.clientWidth,h=c5.clientHeight;
      cam5.aspect=w/h; cam5.updateProjectionMatrix();
      r5.setSize(w,h);
    });
    (function anim5(){
      requestAnimationFrame(anim5);
      ctrl5.update();
      r5.render(s5,cam5);
    })();
  </script>

  <!-- ============================= -->
  <!-- Workshop 6.1 inline preview -->
  <script type="module">
    import * as THREE             from 'three';
    import { OrbitControls }      from 'three/addons/controls/OrbitControls.js';
    import { ShadowMapViewer }    from 'three/addons/utils/ShadowMapViewer.js';
    import { OBJLoader }          from 'three/addons/loaders/OBJLoader.js';
    const container6 = document.getElementById("shadow-container");
    let camera6, scene6, renderer6, clock6;
    let dir6, spot6, dirSMV, spotSMV;
    init6(); animate6();
    function init6(){
      camera6=new THREE.PerspectiveCamera(45,container6.clientWidth/container6.clientHeight,1,1000);
      camera6.position.set(0,15,35);
      scene6=new THREE.Scene();
      scene6.add(new THREE.AmbientLight(0x404040,3));
      spot6=new THREE.SpotLight(0xffffff,500);
      spot6.position.set(10,15,5);
      spot6.angle=Math.PI/5;
      spot6.penumbra=0.3;
      spot6.castShadow=true;
      spot6.shadow.camera.near=8;
      spot6.shadow.camera.far=30;
      spot6.shadow.mapSize.set(1024,1024);
      scene6.add(spot6);
      scene6.add(new THREE.CameraHelper(spot6.shadow.camera));
      dir6=new THREE.DirectionalLight(0xffffff,3);
      dir6.position.set(0,10,0);
      dir6.castShadow=true;
      dir6.shadow.camera.near=1;
      dir6.shadow.camera.far=10;
      dir6.shadow.camera.left=-15;
      dir6.shadow.camera.right=15;
      dir6.shadow.camera.top=15;
      dir6.shadow.camera.bottom=-15;
      dir6.shadow.mapSize.set(1024,1024);
      scene6.add(dir6);
      scene6.add(new THREE.CameraHelper(dir6.shadow.camera));
      const geo=new THREE.BoxGeometry(10,0.15,10),
            mat=new THREE.MeshPhongMaterial({color:0xa0adaf,shininess:150,specular:0x111111}),
            g=new THREE.Mesh(geo,mat);
      g.scale.multiplyScalar(3);
      g.receiveShadow=true;
      scene6.add(g);
      renderer6=new THREE.WebGLRenderer({antialias:true});
      renderer6.setSize(container6.clientWidth,container6.clientHeight);
      renderer6.shadowMap.enabled=true;
      renderer6.shadowMap.type=THREE.BasicShadowMap;
      container6.appendChild(renderer6.domElement);
      const ctrl6=new OrbitControls(camera6,renderer6.domElement);
      ctrl6.target.set(0,2,0);
      ctrl6.update();
      clock6=new THREE.Clock();
      dirSMV=new ShadowMapViewer(dir6);
      spotSMV=new ShadowMapViewer(spot6);
      onResize6();
      window.addEventListener('resize',onResize6);
    }
    function onResize6(){
      const w=container6.clientWidth,h=container6.clientHeight;
      camera6.aspect=w/h; camera6.updateProjectionMatrix();
      renderer6.setSize(w,h);
      const s=window.innerWidth*0.15;
      dirSMV.size.set(s,s);
      dirSMV.position.set(10,10);
      dirSMV.update();
      spotSMV.size.set(s,s);
      spotSMV.position.set(s+20,10);
      spotSMV.update();
    }
    function animate6(){
      requestAnimationFrame(animate6);
      renderer6.render(scene6,camera6);
      dirSMV.render(renderer6);
      spotSMV.render(renderer6);
    }
  </script>

  <!-- ============================= -->
  <!-- Workshop 7 inline preview -->
  <script type="module">
    import * as THREE                from 'three';
    import { OrbitControls }         from 'three/addons/controls/OrbitControls.js';

    const G = 6.674e-3;
    const PARTICLE_MASS = 1;
    const PLANETS = [
      { mass: 20, color: 0xff4444, position: new THREE.Vector3( 5, 0, 0) },
      { mass: 10, color: 0x44ff44, position: new THREE.Vector3(-5, 0, 0) },
      { mass: 15, color: 0x4444ff, position: new THREE.Vector3( 0, 5, 0) }
    ];

    // scene & camera
    const container7 = document.getElementById("gravity-container");
    const scene7     = new THREE.Scene();
    const camera7    = new THREE.PerspectiveCamera(60, container7.clientWidth/container7.clientHeight, 0.1, 1000);
    camera7.position.set(0,0,20);

    const renderer7 = new THREE.WebGLRenderer({ antialias:true });
    renderer7.setSize(container7.clientWidth, container7.clientHeight);
    container7.appendChild(renderer7.domElement);

    scene7.add(new THREE.AmbientLight(0xffffff, 0.2));
    const dir7 = new THREE.DirectionalLight(0xffffff, 0.8);
    dir7.position.set(1,1,1);
    scene7.add(dir7);

    // planets
    for (let p of PLANETS) {
      const mat = new THREE.MeshStandardMaterial({ color: p.color });
      const geo = new THREE.SphereGeometry(0.8,16,16);
      const m   = new THREE.Mesh(geo, mat);
      m.position.copy(p.position);
      scene7.add(m);
      p.mesh = m;
    }

    // particle
    const pMat = new THREE.MeshStandardMaterial({ color: 0xffff00 });
    const pGeo = new THREE.SphereGeometry(0.3,12,12);
    const particle7 = new THREE.Mesh(pGeo, pMat);
    particle7.position.set(0,-8,0);
    scene7.add(particle7);

    let velocity7 = new THREE.Vector3(2,0,0);

    const controls7 = new OrbitControls(camera7, renderer7.domElement);
    controls7.enableDamping = true;

    function animate7() {
      requestAnimationFrame(animate7);

      // compute net force
      let netF = new THREE.Vector3(0,0,0);
      for (let p of PLANETS) {
        const r = new THREE.Vector3().subVectors(p.mesh.position, particle7.position);
        const dist2 = r.lengthSq();
        const Fmag = G * (PARTICLE_MASS * p.mass) / dist2;
        netF.add(r.normalize().multiplyScalar(Fmag));
      }

      // integrate
      const accel = netF.clone().divideScalar(PARTICLE_MASS);
      velocity7.add(accel.multiplyScalar(0.016));
      particle7.position.add(velocity7.clone().multiplyScalar(0.016));

      controls7.update();
      renderer7.render(scene7, camera7);
    }
    animate7();
  </script>
</body>
</html>
